---
# tasks file for build
- name: Add docker file
  copy:
    src: Dockerfile
    dest: /tmp

- name: Install packages
  apt:
    pkg:
      - docker.io
      - python3-pip
    update_cache: yes
    state: present

- name: Pip install docker
  pip:
    name: docker

- name: Auth Docker Hub
  community.docker.docker_login:
    username: syrkashevav
    password: "{{ password_docker }}"

- name: Build docker image
  community.docker.docker_image:
    build:
      path: /tmp
    name: warfile
    repository: syrkashevav/build
    tag: v1.0
    push: yes
    source: build
